<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <meta name="generator" content="VuePress 2.0.0-beta.27">
    <meta name="theme-color" content="#803eaf"><meta name="apple-mobile-web-app-capable" content="yes"><meta name="apple-mobile-web-app-status-bar-style" content="black"><title>Network | null</title><meta name="description" content="">
    <link rel="preload" href="/osmosis/assets/js/runtime~app.c2a23923.js" as="script"><link rel="preload" href="/osmosis/assets/css/styles.5db49dac.css" as="style"><link rel="preload" href="/osmosis/assets/js/812.e65e75b8.js" as="script"><link rel="preload" href="/osmosis/assets/js/app.bc387aac.js" as="script">
    <link rel="stylesheet" href="/osmosis/assets/css/styles.5db49dac.css">
  </head>
  <body>
    <div id="app"><!--[--><div class="theme-container"><!--[--><header class="navbar"><div class="toggle-sidebar-button" title="toggle sidebar" aria-expanded="false" role="button" tabindex="0"><div class="icon" aria-hidden="true"><span></span><span></span><span></span></div></div><span><a href="/osmosis/" class=""><!----><!----></a></span><div class="navbar-links-wrapper" style=""><!--[--><!--]--><!----><!--[--><!--]--><button class="toggle-dark-button" title="toggle dark mode"><svg style="" class="icon" focusable="false" viewBox="0 0 32 32"><path d="M16 12.005a4 4 0 1 1-4 4a4.005 4.005 0 0 1 4-4m0-2a6 6 0 1 0 6 6a6 6 0 0 0-6-6z" fill="currentColor"></path><path d="M5.394 6.813l1.414-1.415l3.506 3.506L8.9 10.318z" fill="currentColor"></path><path d="M2 15.005h5v2H2z" fill="currentColor"></path><path d="M5.394 25.197L8.9 21.691l1.414 1.415l-3.506 3.505z" fill="currentColor"></path><path d="M15 25.005h2v5h-2z" fill="currentColor"></path><path d="M21.687 23.106l1.414-1.415l3.506 3.506l-1.414 1.414z" fill="currentColor"></path><path d="M25 15.005h5v2h-5z" fill="currentColor"></path><path d="M21.687 8.904l3.506-3.506l1.414 1.415l-3.506 3.505z" fill="currentColor"></path><path d="M15 2.005h2v5h-2z" fill="currentColor"></path></svg><svg style="display:none;" class="icon" focusable="false" viewBox="0 0 32 32"><path d="M13.502 5.414a15.075 15.075 0 0 0 11.594 18.194a11.113 11.113 0 0 1-7.975 3.39c-.138 0-.278.005-.418 0a11.094 11.094 0 0 1-3.2-21.584M14.98 3a1.002 1.002 0 0 0-.175.016a13.096 13.096 0 0 0 1.825 25.981c.164.006.328 0 .49 0a13.072 13.072 0 0 0 10.703-5.555a1.01 1.01 0 0 0-.783-1.565A13.08 13.08 0 0 1 15.89 4.38A1.015 1.015 0 0 0 14.98 3z" fill="currentColor"></path></svg></button><!----></div></header><!--]--><div class="sidebar-mask"></div><!--[--><aside class="sidebar"><!----><!--[--><!--]--><ul class="sidebar-links"><!--[--><!--[--><a href="/osmosis/intro/" class="nav-link sidebar-heading sidebar-item" aria-label="What is Osmosis?"><!--[--><!--]--> What is Osmosis? <!--[--><!--]--></a><!----><!--]--><!--[--><a href="/osmosis/liquidity/" class="nav-link sidebar-heading sidebar-item" aria-label="Liquidity Providing"><!--[--><!--]--> Liquidity Providing <!--[--><!--]--></a><!----><!--]--><!--[--><a href="/osmosis/staking/" class="nav-link sidebar-heading sidebar-item" aria-label="Staking"><!--[--><!--]--> Staking <!--[--><!--]--></a><!----><!--]--><!--[--><a href="/osmosis/governance/" class="nav-link sidebar-heading sidebar-item" aria-label="Governance"><!--[--><!--]--> Governance <!--[--><!--]--></a><!----><!--]--><!--[--><a href="/osmosis/other-features/" class="nav-link sidebar-heading sidebar-item" aria-label="Other Features"><!--[--><!--]--> Other Features <!--[--><!--]--></a><!----><!--]--><!--[--><a href="/osmosis/osmo/" class="nav-link sidebar-heading sidebar-item" aria-label="OSMO"><!--[--><!--]--> OSMO <!--[--><!--]--></a><!----><!--]--><!--[--><a aria-current="page" href="/osmosis/network/" class="router-link-active router-link-exact-active nav-link router-link-active sidebar-heading sidebar-item active" aria-label="Network"><!--[--><!--]--> Network <!--[--><!--]--></a><ul class=""><li><!--[--><a aria-current="page" href="/osmosis/network/#quickstart" class="router-link-active router-link-exact-active nav-link sidebar-item" aria-label="Quickstart"><!--[--><!--]--> Quickstart <!--[--><!--]--></a><!----><!--]--></li><li><!--[--><a aria-current="page" href="/osmosis/network/#joining-mainnet" class="router-link-active router-link-exact-active nav-link sidebar-item" aria-label="Joining Mainnet"><!--[--><!--]--> Joining Mainnet <!--[--><!--]--></a><!----><!--]--></li><li><!--[--><a aria-current="page" href="/osmosis/network/#joining-testnet" class="router-link-active router-link-exact-active nav-link sidebar-item" aria-label="Joining Testnet"><!--[--><!--]--> Joining Testnet <!--[--><!--]--></a><!----><!--]--></li><li><!--[--><a aria-current="page" href="/osmosis/network/#relayers" class="router-link-active router-link-exact-active nav-link sidebar-item" aria-label="Relayers"><!--[--><!--]--> Relayers <!--[--><!--]--></a><!----><!--]--></li></ul><!--]--><!--[--><a href="/osmosis/validators/" class="nav-link sidebar-heading sidebar-item" aria-label="Validators"><!--[--><!--]--> Validators <!--[--><!--]--></a><!----><!--]--><!--[--><a href="/osmosis/tutorials/" class="nav-link sidebar-heading sidebar-item" aria-label="Tutorials"><!--[--><!--]--> Tutorials <!--[--><!--]--></a><!----><!--]--><!--]--></ul><!--[--><!--]--></aside><!--]--><!--[--><main class="page"><!--[--><!--]--><div class="theme-default-content"><!--[--><h1 id="network" tabindex="-1"><a class="header-anchor" href="#network" aria-hidden="true">#</a> Network</h1><h2 id="quickstart" tabindex="-1"><a class="header-anchor" href="#quickstart" aria-hidden="true">#</a> Quickstart</h2><p><em>(Note: This repository is under active development. Architecture and implementation may change without documentation)</em></p><p>This is what you&#39;d use to get a node up and running, fast. It assumes that it is starting on a blank ubuntu machine. It eschews a systemd unit, allowing automation to be up to the user. It assumes that installing Go is in-scope since Ubuntu&#39;s repositories aren&#39;t up to date and you&#39;ll be needing go to use osmosis. It handles the Go environment variables because those are a common pain point.</p><p><strong>Install go</strong></p><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code><span class="token function">wget</span> -q -O - https://git.io/vQhTU <span class="token operator">|</span> <span class="token function">bash</span> -s -- --version <span class="token number">1.17</span>.2
</code></pre><div class="line-numbers"><span class="line-number">1</span><br></div></div><p>Then exit and re-enter your shell.</p><p><strong>Install Osmosis and check that it is on $PATH</strong></p><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code><span class="token function">git</span> clone https://github.com/osmosis-labs/osmosis
<span class="token builtin class-name">cd</span> osmosis
<span class="token function">git</span> checkout v3.1.0
<span class="token function">make</span> <span class="token function">install</span>
<span class="token function">which</span> osmosisd
</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><p><strong>Launch Osmosis</strong></p><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code>osmosisd init yourmonikerhere
<span class="token function">wget</span> -O ~/.osmosisd/config/genesis.json https://github.com/osmosis-labs/networks/raw/main/osmosis-1/genesis.json
osmosisd start
</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><p>More Nodes ==&gt; More Network</p><p>More Network ==&gt; Faster Sync</p><p>Faster Sync ==&gt; Less Developer Friction</p><p>Less Developer Friction ==&gt; More Osmosis</p><p>Thank you for supporting a healthy blockchain network and community by running an Osmosis node!</p><h2 id="joining-mainnet" tabindex="-1"><a class="header-anchor" href="#joining-mainnet" aria-hidden="true">#</a> Joining Mainnet</h2><h2 id="joining-testnet" tabindex="-1"><a class="header-anchor" href="#joining-testnet" aria-hidden="true">#</a> Joining Testnet</h2><p>Start by ensuring your system is up to date</p><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code><span class="token function">sudo</span> <span class="token function">apt</span> update
<span class="token function">sudo</span> <span class="token function">apt</span> upgrade
</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><p>Install tools if not already installed (git, gcc, make, ufw, etc.)</p><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code><span class="token function">sudo</span> <span class="token function">apt</span> <span class="token function">install</span> <span class="token function">git</span> build-essential ufw <span class="token function">curl</span> jq snapd --yes
</code></pre><div class="line-numbers"><span class="line-number">1</span><br></div></div><p>Install go</p><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code><span class="token function">wget</span> -q -O - https://git.io/vQhTU <span class="token operator">|</span> <span class="token function">bash</span> -s -- --version <span class="token number">1.17</span>.2
</code></pre><div class="line-numbers"><span class="line-number">1</span><br></div></div><p>After installed, open new terminal to prevent issues</p><p>Run the following to clone the osmosis repo</p><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code><span class="token builtin class-name">cd</span> <span class="token environment constant">$HOME</span>
<span class="token function">git</span> clone https://github.com/osmosis-labs/osmosis
<span class="token builtin class-name">cd</span> osmosis
<span class="token function">git</span> checkout v3.2.0_with_cache
<span class="token function">make</span> <span class="token function">install</span>
</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><p>You have now installed the Osmosis Daemon (osmosisd). Use osmosisd to initialize your node with the following (replace the NODE_NAME with a name of your choosing):</p><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code>osmosisd init NODE_NAME --chain-id<span class="token operator">=</span>osmosis-testnet-0
</code></pre><div class="line-numbers"><span class="line-number">1</span><br></div></div><p>We now need to open the config.toml to edit the seed list</p><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code><span class="token builtin class-name">cd</span> <span class="token environment constant">$HOME</span>/.osmosisd/config
<span class="token function">nano</span> config.toml
</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><p>Use page down or arrow keys to get to the line that says seeds = &quot;&quot; and replace it with the following</p><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code>seeds <span class="token operator">=</span> <span class="token string">&quot;4eaed17781cd948149098d55f80a28232a365236@testmosis.blockpane.com:26656&quot;</span>
</code></pre><div class="line-numbers"><span class="line-number">1</span><br></div></div><p>Then pres Ctrl+O, then enter to save, then Ctrl+X to exit</p><p>We will now set up cosmovisor to ensure the upgrade happens flawlessly. To install Cosmovisor:</p><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code><span class="token builtin class-name">cd</span> <span class="token environment constant">$HOME</span>
<span class="token function">git</span> clone https://github.com/cosmos/cosmos-sdk
<span class="token builtin class-name">cd</span> cosmos-sdk
<span class="token function">git</span> checkout v0.42.9
<span class="token function">make</span> cosmovisor
<span class="token function">cp</span> cosmovisor/cosmovisor <span class="token variable">$GOPATH</span>/bin/cosmovisor
<span class="token builtin class-name">cd</span> <span class="token environment constant">$HOME</span>
</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br></div></div><p>After this, create the following directories with the following commands</p><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code><span class="token function">mkdir</span> -p ~/.osmosisd/cosmovisor
<span class="token function">mkdir</span> -p ~/.osmosisd/cosmovisor/genesis
<span class="token function">mkdir</span> -p ~/.osmosisd/cosmovisor/genesis/bin
<span class="token function">mkdir</span> -p ~/.osmosisd/cosmovisor/upgrades
</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><p>Next, run the following commands to set the environment variables</p><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code><span class="token builtin class-name">echo</span> <span class="token string">&quot;# Setup Cosmovisor&quot;</span> <span class="token operator">&gt;&gt;</span> ~/.profile
<span class="token builtin class-name">echo</span> <span class="token string">&quot;export DAEMON_NAME=osmosisd&quot;</span> <span class="token operator">&gt;&gt;</span> ~/.profile
<span class="token builtin class-name">echo</span> <span class="token string">&quot;export DAEMON_HOME=<span class="token environment constant">$HOME</span>/.osmosisd&quot;</span> <span class="token operator">&gt;&gt;</span> ~/.profile
<span class="token builtin class-name">echo</span> <span class="token string">&quot;export DAEMON_ALLOW_DOWNLOAD_BINARIES=false&quot;</span> <span class="token operator">&gt;&gt;</span> ~/.profile
<span class="token builtin class-name">echo</span> <span class="token string">&quot;export DAEMON_LOG_BUFFER_SIZE=512&quot;</span> <span class="token operator">&gt;&gt;</span> ~/.profile
<span class="token builtin class-name">echo</span> <span class="token string">&quot;export DAEMON_RESTART_AFTER_UPGRADE=true&quot;</span> <span class="token operator">&gt;&gt;</span> ~/.profile
<span class="token builtin class-name">source</span> ~/.profile
</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br></div></div><p>Download and replace the genesis file with the following commands</p><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code><span class="token builtin class-name">cd</span> <span class="token environment constant">$HOME</span>/.osmosisd/config
<span class="token function">wget</span> https://github.com/osmosis-labs/networks/raw/unity/v4/osmosis-1/upgrades/v4/testnet/genesis.tar.bz2
<span class="token function">tar</span> -xjf genesis.tar.bz2
</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><p>Next, copy the current osmosisd binary into the cosmovisor/genesis folder with the following command</p><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code><span class="token function">cp</span> <span class="token variable">$GOPATH</span>/bin/osmosisd ~/.osmosisd/cosmovisor/genesis/bin
</code></pre><div class="line-numbers"><span class="line-number">1</span><br></div></div><p>To check your work, ensure the version of cosmovisor and osmosisd are the same</p><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code>cosmovisor version
osmosisd version
</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><p>These two command should both output 3.1.0-23-g517562d</p><p>Before we start cosmovisor, lets prep the upgrade to v4.0.0-rc1 with the following commands</p><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code><span class="token function">mkdir</span> -p ~/.osmosisd/cosmovisor/upgrades/v4/bin
<span class="token builtin class-name">cd</span> <span class="token environment constant">$HOME</span>/osmosis
<span class="token function">git</span> checkout v4.0.0
<span class="token function">make</span> build
<span class="token function">cp</span> build/osmosisd ~/.osmosisd/cosmovisor/upgrades/v4/bin
<span class="token builtin class-name">cd</span> <span class="token environment constant">$HOME</span>
</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div><p>Use the following command to ensure the validator file is in the gensesis state</p><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code>osmosisd unsafe-reset-all
</code></pre><div class="line-numbers"><span class="line-number">1</span><br></div></div><p>While we could start cosmovisor now with &quot;cosmovisor start&quot;, lets set up a service with the following commands to allow it to run in the background as well as restart automatically if it runs into any problems!</p><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code><span class="token builtin class-name">echo</span> <span class="token string">&quot;[Unit]
Description=Cosmovisor daemon
After=network-online.target
[Service]
Environment=&quot;</span><span class="token assign-left variable">DAEMON_NAME</span><span class="token operator">=</span>osmosisd<span class="token string">&quot;
Environment=&quot;</span><span class="token assign-left variable">DAEMON_HOME</span><span class="token operator">=</span><span class="token variable">${<span class="token environment constant">HOME</span>}</span>/.osmosisd<span class="token string">&quot;
Environment=&quot;</span><span class="token assign-left variable">DAEMON_RESTART_AFTER_UPGRADE</span><span class="token operator">=</span>true<span class="token string">&quot;
Environment=&quot;</span><span class="token assign-left variable">DAEMON_ALLOW_DOWNLOAD_BINARIES</span><span class="token operator">=</span>false<span class="token string">&quot;
Environment=&quot;</span><span class="token assign-left variable">DAEMON_LOG_BUFFER_SIZE</span><span class="token operator">=</span><span class="token number">512</span><span class="token string">&quot;
User=<span class="token environment constant">$USER</span>
ExecStart=<span class="token variable">${<span class="token environment constant">HOME</span>}</span>/go/bin/cosmovisor start
Restart=always
RestartSec=3
LimitNOFILE=4096
[Install]
WantedBy=multi-user.target
&quot;</span> <span class="token operator">&gt;</span>cosmovisor.service
</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br></div></div><p>Move this new file to the systemd directory</p><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code><span class="token function">sudo</span> <span class="token function">mv</span> cosmovisor.service /lib/systemd/system/cosmovisor.service
</code></pre><div class="line-numbers"><span class="line-number">1</span><br></div></div><p>Finally, run the following commands</p><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code><span class="token function">sudo</span> systemctl daemon-reload
<span class="token function">sudo</span> systemctl start cosmovisor
</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><p>Check the status of your service</p><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code><span class="token function">sudo</span> systemctl status cosmovisor
</code></pre><div class="line-numbers"><span class="line-number">1</span><br></div></div><p>To see live logs of your service</p><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code>journalctl -u cosmovisor -f
</code></pre><div class="line-numbers"><span class="line-number">1</span><br></div></div><p>The process should initialize and get to block 1122200, where it will automatically upgrade to v4.0.0-rc1</p><p>At around block height 1128853, when reading the logs you will see many notifications of &quot;slashing and jailing validator&quot;. This is due to fact that many validators did not participate in the testnet and therefore get jailed at the same time (approx 30,000 blocks after the upgrade). In my experience, this may cause your node to reset due to a memory error. As long as you set up the service above, it will automatically reset and eventually get passed this difficult block.</p><h2 id="relayers" tabindex="-1"><a class="header-anchor" href="#relayers" aria-hidden="true">#</a> Relayers</h2><!--]--></div><footer class="page-meta"><!----><!----><div class="meta-item contributors"><span class="meta-item-label">Contributors: </span><span class="meta-item-info"><!--[--><!--[--><span class="contributor" title="email: adamleetucker@outlook.com">Czarcas7ic</span><!----><!--]--><!--]--></span></div></footer><nav class="page-nav"><p class="inner"><span class="prev"> ← <a href="/osmosis/osmo/" class="nav-link" aria-label="OSMO"><!--[--><!--]--> OSMO <!--[--><!--]--></a></span><span class="next"><a href="/osmosis/validators/" class="nav-link" aria-label="Validators"><!--[--><!--]--> Validators <!--[--><!--]--></a> → </span></p></nav><!--[--><!--]--></main><!--]--></div><!----><!--]--></div>
    <script src="/osmosis/assets/js/runtime~app.c2a23923.js" defer></script><script src="/osmosis/assets/js/812.e65e75b8.js" defer></script><script src="/osmosis/assets/js/app.bc387aac.js" defer></script>
  </body>
</html>
